var FptrAPI=function(){"use strict";function n(){this.addr=i;this.deviceId=r;this._initialized=!1}var i="http://127.0.0.1:16732/api/v2/",r,t;return n.prototype.init=function(){this._initialized=!0},n.prototype._createUUID=function(){var n=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var i=(n+Math.random()*16)%16|0;return n=Math.floor(n/16),(t==="x"?i:i&3|8).toString(16)})},n.prototype.get=function(n){return $.ajax({url:this.addr+n,type:"GET",dataType:"json"})},n.prototype.post=function(n,t){return $.ajax({url:this.addr+n,type:"POST",data:JSON.stringify($.extend({deviceID:this.deviceId},t)),contentType:"application/json; charset=utf-8",dataType:"json"})},n.prototype.put=function(n,t){return $.ajax({url:this.addr+n,type:"PUT",data:JSON.stringify($.extend({deviceID:this.deviceId},t)),contentType:"application/json; charset=utf-8",dataType:"json"})},n.prototype.getServerInfo=function(){return this.get("serverInfo")},n.prototype.getSettings=function(){return this.get("settings")},n.prototype.setSettings=function(n){return this.put("settings",n)},n.prototype.queryDeviceInfo=function(){return this.post("operations/queryDeviceInfo",null)},n.prototype.queryDeviceStatus=function(){return this.post("operations/queryDeviceStatus",null)},n.prototype.queryShiftStatus=function(){return this.post("operations/queryShiftStatus",null)},n.prototype.queryShiftTotals=function(){return this.post("operations/queryShiftTotals",null)},n.prototype.queryIncomeTotals=function(){return this.post("operations/queryIncomeTotals",null)},n.prototype.queryOutcomeTotals=function(){return this.post("operations/queryOutcomeTotals",null)},n.prototype.queryReceiptTotals=function(n){return this.post("operations/queryReceiptTotals",n)},n.prototype.queryFnInfo=function(){return this.post("operations/queryFnInfo",null)},n.prototype.queryFnStatus=function(){return this.post("operations/queryFnStatus",null)},n.prototype.queryOfdExchangeStatus=function(){return this.post("operations/queryOfdExchangeStatus",null)},n.prototype.request=function(n){return this.post("requests",$.extend({uuid:this._createUUID(),request:[]},n))},n.prototype.openShift=function(n,t){return this.request({request:[{type:"openShift",operator:{name:n||"",vatin:t+""}}]})},n.prototype.closeShift=function(n,t){return this.request({request:[{type:"closeShift",operator:{name:n||"",vatin:t+""}}]})},n.prototype.getResult=function(n,t){var i=this;this.get("requests/"+n).done(function(r){if(r.results&&r.results[0].status==="inProgress"){setTimeout(function(){i.getResult(n,t)},1e3);return}t&&typeof t=="function"&&t(r)})},t=new n,t.init(),t.API=n,t}();